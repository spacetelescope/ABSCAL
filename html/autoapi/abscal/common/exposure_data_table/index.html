

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>abscal.common.exposure_data_table &mdash; abscal 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/stsci.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/stsci.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="abscal.common.setup_package" href="../setup_package/index.html" />
    <link rel="prev" title="abscal.common.args" href="../args/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          
            <a href="../../../../index.html" class="icon icon-home"> abscal
            
            <img src="../../../../_static/stsci_pri_combo_mark_white.png" class="logo" />
          </a>

          
            
            
          
          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
  
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installing ABSCAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../using_abscal.html">Using ABSCAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../abscal_handbook.html">ABSCAL Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../abscal_idl_code.html">ABSCAL IDL Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../abscal_testing.html">ABSCAL Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples.html">ABSCAL Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abscal</span></code></a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html#subpackages">Subpackages</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">abscal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">API Reference</a> &raquo;</li>
        
          <li><a href="../../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abscal</span></code></a> &raquo;</li>
        
          <li><a href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abscal.common</span></code></a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">abscal.common.exposure_data_table</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/autoapi/abscal/common/exposure_data_table/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-abscal.common.exposure_data_table">
<span id="abscal-common-exposure-data-table"></span><h1><a class="reference internal" href="#module-abscal.common.exposure_data_table" title="abscal.common.exposure_data_table"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abscal.common.exposure_data_table</span></code></a><a class="headerlink" href="#module-abscal.common.exposure_data_table" title="Permalink to this headline">¶</a></h1>
<p>This module contains the ExposureTable class. The class contains a table of
exposure metadata, as well as the ability to export that table in formats
suitable for IDL compatibility, or for further use by later scripts.</p>
<div class="section" id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Brian York</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="use">
<h2>Use<a class="headerlink" href="#use" title="Permalink to this headline">¶</a></h2>
<p>This module provides the AbscalDataTable class, which holds an astropy table
of exposure metadata, along with the ability to present that data either in
a form expected by IDL, or in a form more suitable for passing on to
later scripts in abscal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">abscal.common.exposure_data_table</span> <span class="kn">import</span> <span class="n">AbscalDataTable</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">AbscalDataTable</span><span class="p">()</span>

<span class="n">t</span><span class="o">.</span><span class="n">add_exposure</span><span class="p">(</span><span class="o">&lt;</span><span class="n">exposure</span> <span class="n">metadata</span><span class="o">&gt;</span><span class="p">)</span>
<span class="o">...</span> <span class="c1"># repeat as needed</span>
<span class="n">t</span><span class="o">.</span><span class="n">write_to_file</span><span class="p">(</span><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">idl_mode</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">other</span> <span class="n">arguments</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>The goal is to create an astropy.table.Table subclass that has the ability to successfully
read in IDL-formatted tables, and to write out IDL-formatted tables <em>as an additional
option</em>, but that generally uses its own format.</p>
</div>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#abscal.common.exposure_data_table.AbscalDataTable" title="abscal.common.exposure_data_table.AbscalDataTable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AbscalDataTable</span></code></a></p></td>
<td><p>A class to represent HST exposure metadata for ABSCAL</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#abscal.common.exposure_data_table.scan_rate_formatter" title="abscal.common.exposure_data_table.scan_rate_formatter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scan_rate_formatter</span></code></a>(scan_rate)</p></td>
<td><p>Format the IDL table ‘SCAN_RAT’ column.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.scan_rate_formatter">
<span class="sig-prename descclassname"><span class="pre">abscal.common.exposure_data_table.</span></span><span class="sig-name descname"><span class="pre">scan_rate_formatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan_rate</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.scan_rate_formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the IDL table ‘SCAN_RAT’ column.</p>
<p>In IDL at least, the scan rate column has a very particular format (0.0000 for cases
where there is no scan being done, left-aligned). There’s no good one-step way of
doing that formatting in python, so here’s what we’re stuck with.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>scan_rate</strong> (<em>float</em>) – The scan rate to format</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>scan_rate_str</strong> – The scan rate, formatted as a four-decimal-place floating point, and left-aligned.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">abscal.common.exposure_data_table.</span></span><span class="sig-name descname"><span class="pre">AbscalDataTable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masked</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.table.Table</span></code></p>
<p>A class to represent HST exposure metadata for ABSCAL</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.column_mappings">
<span class="sig-name descname"><span class="pre">column_mappings</span></span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.column_mappings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.default_format">
<span class="sig-name descname"><span class="pre">default_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">ascii.ipac</span></em><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.default_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.standard_columns">
<span class="sig-name descname"><span class="pre">standard_columns</span></span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.standard_columns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.from_idl_table">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_idl_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.from_idl_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads in an IDL-formatted text table, and turns it into a standard table. Because
it uses the “add_exposure()” function (defined below), rows that just aren’t
present in the IDL table will have default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cls</strong> (<em>class</em>) – The class type to return</p></li>
<li><p><strong>table_file</strong> (<em>str</em>) – The file to read.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>table</strong> – The populated table</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>instantiated class cls</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Override the read method to make sure that strings have the Object type. That way
they don’t have a fixed character count, and we can append to them as needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>list</em>) – List of positional arguments. Passed directly to super.</p></li>
<li><p><strong>kwargs</strong> (<em>dictionary</em>) – Dictionary of keyword arguments. Passed directly to super.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – The table that was read in.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>astropy.table.Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.add_exposure">
<span class="sig-name descname"><span class="pre">add_exposure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.add_exposure" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new row to the table from a dictionary built up from an exposure.
The dictionary should contain all of the standard abscal columns. If the
value of the root column is already in the table, then deal with it as
provided for in the internal duplicates metadata.</p>
<p>Handling duplicates can currently be any of:</p>
<ul class="simple">
<li><p>both: keep the existing entry, add the new entry.</p></li>
<li><p>preserve: keep the existing entry, discard the new entry.</p></li>
<li><p>replace: remove the existing entry, add the new entry.</p></li>
<li><p>neither: remove the existing entry, discard the new entry.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>metadata_dict</strong> (<em>dict</em>) – A dictionary containing information on a single exposure.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>success</strong> – True if the column was added, False if not. Will generally only be
False in the case of duplicate columns.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.adjust">
<span class="sig-name descname"><span class="pre">adjust</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjustments</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.adjust" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjust the table based on an adjustment dictionary. The dictionary may contain
entries that edit columns or delete rows. This is provided because there are
several observations in the calibration set which are apparently just <em>wrong</em> in
some fundamental way (visit number incorrect, proposal incorrect, etc.) These
exposures need to be put into the correct place if they’re found.</p>
<p>This is a fairly generic function because we don’t know when there might be
another exposure that needs to have something done to it.</p>
<p>The adjustments dictionary consists of two sub-dictionaries, one of items to be
deleted, and the other of items to be edited. The dictionaries are structured as
follows:</p>
<dl class="simple">
<dt>column: str</dt><dd><p>column to look at</p>
</dd>
<dt>key: str</dt><dd><p>value to search for in the column</p>
</dd>
<dt>operation: str</dt><dd><p>operation to perform. ONLY PRESENT FOR EDIT</p>
</dd>
<dt>value: str</dt><dd><p>value to use when applying the operation. ONLY PRESENT FOR EDIT</p>
</dd>
<dt>source: str</dt><dd><p>Where the change came from</p>
</dd>
<dt>reason: str</dt><dd><p>Why the change needed to be made</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>adjustments</strong> (<em>dict</em>) – Dictionary of adjustments</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.set_filter_images">
<span class="sig-name descname"><span class="pre">set_filter_images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.set_filter_images" title="Permalink to this definition">¶</a></dt>
<dd><p>For any grism exposures, look for the nearest associated filter
exposure and, if one is found, associate it using the filter_root
column. A filter image is considered associated if it:</p>
<ul class="simple">
<li><p>is from the same program</p></li>
<li><p>is from the same visit</p></li>
<li><p>has the same POSTARG values</p></li>
</ul>
<p>If there is more than one appropriate exposure, take the one that’s closest in
time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.filtered_copy">
<span class="sig-name descname"><span class="pre">filtered_copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_or_filters</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.filtered_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a copy of the table, filtered by the specified filters. The is a convenience
function that implicitly creates a deep copy, specifically so that edits can be
made to the now-filtered table without altering the original (or even needing to
know that there <em>is</em> and original).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filter_or_filters</strong> (<em>list of filters</em><em> or </em><em>single filter</em>) – The filters to apply</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>table</strong> – The filtered table</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#abscal.common.exposure_data_table.AbscalDataTable" title="abscal.common.exposure_data_table.AbscalDataTable">AbscalDataTable</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.write_to_file">
<span class="sig-name descname"><span class="pre">write_to_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idl_mode</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.write_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the table to a file, optionally using IDL strict compatibility.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str</em>) – The file to write the table to.</p></li>
<li><p><strong>idl_mode</strong> (<em>bool</em>) – Whether to write the table in IDL compatibility mode.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – <dl class="simple">
<dt>Optional keyword arguments. Known arguments are:</dt><dd><dl class="simple">
<dt>filters<span class="classifier">list</span></dt><dd><p>List of filters to apply to the table before writing it.</p>
</dd>
</dl>
</dd>
</dl>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable.n_exposures">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">n_exposures</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable.n_exposures" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of rows in the table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable._filter_table">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_filter_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable._filter_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter a table by means of a particular filter. The filter should be
either a known string value, or a callable which takes an astropy table
and returns a filtered version of the table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> (<em>astropy.table.Table</em>) – The table to filter. Should probably in fact be an AbscalDataTable.</p></li>
<li><p><strong>filter</strong> (<em>str</em><em> or </em><em>callable</em>) – <p>Either a keyword string or a callable. Known strings are:</p>
<dl class="simple">
<dt>stare:</dt><dd><p>remove scan_rate &gt; 0</p>
</dd>
<dt>scan:</dt><dd><p>remove scan_rate == 0</p>
</dd>
<dt>filter:</dt><dd><p>remove grism data</p>
</dd>
<dt>grism:</dt><dd><p>keep all grism data and the closest-in-time filter exposure from the
same visit as the grism exposure.</p>
</dd>
<dt>obset:&lt;value&gt;:</dt><dd><p>keep all data where the root column begins with &lt;value&gt;</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>filtered_table</strong> – Filtered table.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>astropy.table.Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable._grism_filter">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_grism_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable._grism_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the table as follows:</p>
<ul class="simple">
<li><p>keep all grism exposures</p></li>
<li><p>for each grism exposure,</p>
<ul>
<li><p>if there is at least one filter exposure from the same program and visit,
keep the filter exposure closest in time to the grism exposure</p></li>
<li><p>else annotate the grism that no corresponding filter was found</p></li>
</ul>
</li>
</ul>
<p>In order to do this, the function uses the above set_filter_images function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>table</strong> (<em>astropy.table.Table</em>) – The table to filter.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>filtered_table</strong> – The filtered table.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>astropy.table.Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable._read_file_to_table">
<span class="sig-name descname"><span class="pre">_read_file_to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idl_mode</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable._read_file_to_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Read an abscal table from a file, optionally using IDL compatibility mode. Note
that, even if idl_mode is set to False, if reading the table fails with the
standard method, then the program will attempt to read the table with the IDL
reader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str</em>) – The table file to read.</p></li>
<li><p><strong>idl_mode</strong> (<em>bool</em>) – Whether to operate in IDL compatibility mode.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – <p>Optional keyword arguments. Known arguments are:</p>
<dl class="simple">
<dt>format: str</dt><dd><p>Table format to attempt to read.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>t</strong> – The table that was read in.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>astropy.table.Table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable._write_to_idl">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_write_to_idl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable._write_to_idl" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the table in strict IDL mode. This mode uses different columns (which
are sometimes combinations of several variables that need to be separated for
use, and are thus stored in separate columns in standard mode).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str</em>) – The file to write to.</p></li>
<li><p><strong>table</strong> (<em>astropy.table.Table</em>) – The (filtered) table to write</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – <p>Dictionary of optional keywords. Known keywords include:</p>
<dl class="simple">
<dt>create_time: datetime.DateTime</dt><dd><p>Table creation date</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable._get_kwarg">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_kwarg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable._get_kwarg" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an abscal-specific keyword argument from the kwargs dictionary (if present),
and pop that keyword out of the kwargs dictionary. If not present, return a
(supplied) default value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The kwarg key to look for</p></li>
<li><p><strong>default</strong> (<em>obj</em>) – The default value of key</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – The keyword dictionary to search.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>value</strong> (<em>obj</em>) – The value found (or the default value)</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – The keyword dictionary with ‘key’ removed from it (if it was present).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="abscal.common.exposure_data_table.AbscalDataTable._fix_columns">
<span class="sig-name descname"><span class="pre">_fix_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.common.exposure_data_table.AbscalDataTable._fix_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjust all columns to replace fixed-length strings with objects.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../setup_package/index.html" class="btn btn-neutral float-right" title="abscal.common.setup_package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../args/index.html" class="btn btn-neutral float-left" title="abscal.common.args" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Brian York.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>