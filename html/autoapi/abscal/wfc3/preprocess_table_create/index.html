

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>abscal.wfc3.preprocess_table_create &mdash; abscal 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/stsci.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/stsci.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="abscal.wfc3.reduce_grism_coadd" href="../reduce_grism_coadd/index.html" />
    <link rel="prev" title="abscal.wfc3.tests" href="../tests/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          
            <a href="../../../../index.html" class="icon icon-home"> abscal
            
            <img src="../../../../_static/stsci_pri_combo_mark_white.png" class="logo" />
          </a>

          
            
            
          
          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
  
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installing ABSCAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../using_abscal.html">Using ABSCAL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../abscal_handbook.html">ABSCAL Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../abscal_idl_code.html">ABSCAL IDL Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../abscal_testing.html">ABSCAL Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples.html">ABSCAL Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abscal</span></code></a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html#subpackages">Subpackages</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">abscal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">API Reference</a> &raquo;</li>
        
          <li><a href="../../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abscal</span></code></a> &raquo;</li>
        
          <li><a href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abscal.wfc3</span></code></a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">abscal.wfc3.preprocess_table_create</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/autoapi/abscal/wfc3/preprocess_table_create/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-abscal.wfc3.preprocess_table_create">
<span id="abscal-wfc3-preprocess-table-create"></span><h1><a class="reference internal" href="#module-abscal.wfc3.preprocess_table_create" title="abscal.wfc3.preprocess_table_create"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abscal.wfc3.preprocess_table_create</span></code></a><a class="headerlink" href="#module-abscal.wfc3.preprocess_table_create" title="Permalink to this headline">¶</a></h1>
<p>This module takes a file path and file type specification that matches to one
or more WFC3 exposures. In general, these files should be observations of
WFC3 standard stars. The module will open these files, retrieve information from
their headers, and produce an output table of these files.</p>
<p>For compatibility with the original program, the module can be run from the
command line directly (and given a file specification as a positional argument).
In that case, it will work exactly the same as ‘wfcdir.pro’ as created by Ralph
Bohlin. It also includes additional options that allow the output file name to
be specified, allow the stdout content (and verbosity) to be specified, and
allow multiple input directories to be specified with the positional argument
acting as a template for files to search for rather than as the full search
path.</p>
<div class="section" id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Brian York (all python code)</p></li>
<li><p>Ralph Bohlin (original IDL code)</p></li>
</ul>
</div>
<div class="section" id="use">
<h2>Use<a class="headerlink" href="#use" title="Permalink to this headline">¶</a></h2>
<p>This module is intended to be either run from the command line or used by
other module code as the first step (creating an annotated list of files
for flux calibration):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">preprocess_table_create</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Alternately there are a set of python scripts placed in your path by setup.py that will
import and call this module. The general command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wfc3_setup</span>
</pre></div>
</div>
<p>whilst the IDL version is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wfcdir</span>
</pre></div>
</div>
<p>If you use this module from within python, it is recommended to import the
<cite>populate_table()</cite> function (if you need any custom table values, you can either pass in
an AbscalDataTable directly or pass in keyword parameters that will, in turn, be passed
along to the table creation):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">abscal.wfc3</span> <span class="kn">import</span> <span class="n">populate_table</span>

<span class="n">output_table</span> <span class="o">=</span> <span class="n">populate_table</span><span class="p">(</span><span class="n">some_arguments</span><span class="o">=</span><span class="n">some_values</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#abscal.wfc3.preprocess_table_create.get_target_name" title="abscal.wfc3.preprocess_table_create.get_target_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_target_name</span></code></a>(header)</p></td>
<td><p>Find the canonical target name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#abscal.wfc3.preprocess_table_create.populate_table" title="abscal.wfc3.preprocess_table_create.populate_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_table</span></code></a>(data_table=None, overrides={}, **kwargs)</p></td>
<td><p>Search a directory and produce a table of exposures.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#abscal.wfc3.preprocess_table_create.additional_args" title="abscal.wfc3.preprocess_table_create.additional_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">additional_args</span></code></a>()</p></td>
<td><p>Adds process-specific command-line arguments.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#abscal.wfc3.preprocess_table_create.parse_args" title="abscal.wfc3.preprocess_table_create.parse_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_args</span></code></a>()</p></td>
<td><p>Parse command-line arguments.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#abscal.wfc3.preprocess_table_create.main" title="abscal.wfc3.preprocess_table_create.main"><code class="xref py py-obj docutils literal notranslate"><span class="pre">main</span></code></a>(overrides={})</p></td>
<td><p>Run the process.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="abscal.wfc3.preprocess_table_create.get_target_name">
<span class="sig-prename descclassname"><span class="pre">abscal.wfc3.preprocess_table_create.</span></span><span class="sig-name descname"><span class="pre">get_target_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.wfc3.preprocess_table_create.get_target_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the canonical target name.</p>
<p>Return a standardized target name despite any inconsistencies in target
naming by different PIs. For now, use the existing wfcdir.pro checks to
make a standard target name. In the future, potentially use RA and DEC to
do a lookup to figure out the target and fill in appropriately.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>header</strong> (<em>astropy.io.fits header</em>) – <p>The header containing target information. In this header, the keys</p>
<ul class="simple">
<li><p>targname (target name)</p></li>
<li><p>ra_targ (target RA)</p></li>
<li><p>dec_targ (target DEC)</p></li>
<li><p>sclamp (active lamp)</p></li>
</ul>
<p>are (or may be) used by the function.</p>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>name</strong> – Target name, standardized.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="abscal.wfc3.preprocess_table_create.populate_table">
<span class="sig-prename descclassname"><span class="pre">abscal.wfc3.preprocess_table_create.</span></span><span class="sig-name descname"><span class="pre">populate_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overrides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.wfc3.preprocess_table_create.populate_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Search a directory and produce a table of exposures.</p>
<p>Uses glob to search all directories in the table’s <cite>search_dirs</cite> array for
files matching the table’s <cite>search_str</cite> template, and adds rows to the table
containing metadata based on the files that were found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_table</strong> (<a class="reference internal" href="../../common/exposure_data_table/index.html#abscal.common.exposure_data_table.AbscalDataTable" title="abscal.common.exposure_data_table.AbscalDataTable"><em>abscal.common.exposure_data_table.AbscalDataTable</em></a><em>, </em><em>default None</em>) – The table (which may contain existing data) to which the new data should
be added.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – <p>A dictionary of optional keywords. Currently checked keywords are:</p>
<dl class="simple">
<dt>verbose<span class="classifier">bool</span></dt><dd><p>Flag to indicate whether or not the program should print out
informative text whilst running.</p>
</dd>
<dt>compat<span class="classifier">bool</span></dt><dd><p>Whether to operate in strict IDL compatibility mode</p>
</dd>
</dl>
</p></li>
<li><p><strong>data_table is None</strong> (<em>If</em>) – </p></li>
<li><p><strong>new table will be created in the function. In that case</strong> (<em>a</em>) – </p></li>
<li><p><strong>the</strong> – </p></li>
<li><p><strong>dict will be passed to that table</strong> (<em>kwargs</em>) – </p></li>
<li><p><strong>any table-creation keywords will be sent</strong> (<em>so</em>) – </p></li>
<li><p><strong>through.</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data_table</strong> – A table containing an entry for each input file and necessary metadata
obtained from the FITS header of that file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../../common/exposure_data_table/index.html#abscal.common.exposure_data_table.AbscalDataTable" title="abscal.common.exposure_data_table.AbscalDataTable">abscal.common.exposure_data_table.AbscalDataTable</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="abscal.wfc3.preprocess_table_create.additional_args">
<span class="sig-prename descclassname"><span class="pre">abscal.wfc3.preprocess_table_create.</span></span><span class="sig-name descname"><span class="pre">additional_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#abscal.wfc3.preprocess_table_create.additional_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds process-specific command-line arguments.</p>
<p>This function generates arguments (in a form understandable by
abscal.common.args.parse) to handle items unique to table creation.</p>
<ul class="simple">
<li><p>How duplicate entries should be handled (important because this is process is the
one that adds new entries to a table)</p></li>
<li><p>The search template</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>args</strong> – Dictionary of tuples of arguments for building a module command-line argument
list.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="abscal.wfc3.preprocess_table_create.parse_args">
<span class="sig-prename descclassname"><span class="pre">abscal.wfc3.preprocess_table_create.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#abscal.wfc3.preprocess_table_create.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse command-line arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>res</strong> – A namespace populated by the command-line arguments.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>namespace</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="abscal.wfc3.preprocess_table_create.main">
<span class="sig-prename descclassname"><span class="pre">abscal.wfc3.preprocess_table_create.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">overrides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#abscal.wfc3.preprocess_table_create.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the process.</p>
<p>This function is called if the script is run directly (i.e. __name__ == “__main__”),
and is also imported by the binary command scripts as a way to run this process as a
standalone application.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>overrides</strong> (<em>dict</em>) – Contains keys named after keyword parameters (whether command-line arguments or
parameters used by table creation) that will override whatever value is set there.
Note that specific exposure-specific values from data files will still override
values specified here.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../reduce_grism_coadd/index.html" class="btn btn-neutral float-right" title="abscal.wfc3.reduce_grism_coadd" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../tests/index.html" class="btn btn-neutral float-left" title="abscal.wfc3.tests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Brian York.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>